# åƒç´ é£æµæ”¾ä¹‹è·¯ - æ¶æ„é‡æ„æŒ‡å—

## ğŸ¯ é‡æ„ç›®æ ‡

åŸºäºæ‚¨å½“å‰çš„é¡¹ç›®ï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ªæ›´åŠ è§„èŒƒåŒ–çš„æ¶æ„æ–¹æ¡ˆï¼Œæ—¨åœ¨è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š

1. **ç›®å½•ç»“æ„æ··ä¹±** - ç»Ÿä¸€ä»£ç ç»„ç»‡æ–¹å¼
2. **ç³»ç»Ÿè€¦åˆåº¦é«˜** - é€šè¿‡åˆ†å±‚æ¶æ„é™ä½è€¦åˆ
3. **çŠ¶æ€ç®¡ç†æ··ä¹±** - ç»Ÿä¸€çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
4. **ç¼ºä¹æ¸…æ™°çš„ä¸šåŠ¡è¾¹ç•Œ** - å¼•å…¥é¢†åŸŸé©±åŠ¨è®¾è®¡

## ğŸ—ï¸ æ–°æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è¡¨ç°å±‚ (Presentation)        â”‚  Vueç»„ä»¶ + Phaseråœºæ™¯
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           åº”ç”¨å±‚ (Application)        â”‚  ä¸šåŠ¡æµç¨‹ç¼–æ’
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            é¢†åŸŸå±‚ (Domain)           â”‚  ä¸šåŠ¡é€»è¾‘æ ¸å¿ƒ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         åŸºç¡€è®¾æ–½å±‚ (Infrastructure)    â”‚  æ•°æ®æŒä¹…åŒ– + å¤–éƒ¨æœåŠ¡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            æ ¸å¿ƒå±‚ (Core)             â”‚  æ¡†æ¶æ— å…³çš„æ ¸å¿ƒç»„ä»¶
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–°ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ core/                           # æ ¸å¿ƒå±‚
â”‚   â”œâ”€â”€ GameEngine.ts              # æ¸¸æˆå¼•æ“æ ¸å¿ƒ
â”‚   â”œâ”€â”€ EventBus.ts               # äº‹ä»¶æ€»çº¿
â”‚   â”œâ”€â”€ Entity.ts                 # å®ä½“åŸºç±»
â”‚   â”œâ”€â”€ Component.ts              # ç»„ä»¶ç³»ç»Ÿ
â”‚   â””â”€â”€ System.ts                 # ç³»ç»ŸåŸºç±»
â”‚
â”œâ”€â”€ infrastructure/                # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ StateManager.ts           # ç»Ÿä¸€çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ DataRepository.ts         # æ•°æ®ä»“åº“
â”‚   â”œâ”€â”€ ConfigManager.ts          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ SaveSystem.ts             # å­˜æ¡£ç³»ç»Ÿ
â”‚   â””â”€â”€ AssetLoader.ts            # èµ„æºåŠ è½½
â”‚
â”œâ”€â”€ domain/                        # é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ Character/                 # è§’è‰²é¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ CharacterDomain.ts
â”‚   â”‚   â”œâ”€â”€ CharacterRepository.ts
â”‚   â”‚   â””â”€â”€ CharacterAggregate.ts
â”‚   â”œâ”€â”€ Combat/                    # æˆ˜æ–—é¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ CombatDomain.ts
â”‚   â”‚   â”œâ”€â”€ DamageCalculator.ts
â”‚   â”‚   â””â”€â”€ SkillSystem.ts
â”‚   â”œâ”€â”€ Equipment/                 # è£…å¤‡é¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ EquipmentDomain.ts
â”‚   â”‚   â”œâ”€â”€ CraftingSystem.ts
â”‚   â”‚   â””â”€â”€ ModifierSystem.ts
â”‚   â”œâ”€â”€ Currency/                  # é€šè´§é¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ CurrencyDomain.ts
â”‚   â”‚   â””â”€â”€ TradingSystem.ts
â”‚   â”œâ”€â”€ Quest/                     # ä»»åŠ¡é¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ QuestDomain.ts
â”‚   â”‚   â””â”€â”€ QuestEngine.ts
â”‚   â””â”€â”€ Ascendancy/               # å‡åé¢†åŸŸ
â”‚       â”œâ”€â”€ AscendancyDomain.ts
â”‚       â””â”€â”€ AscendancySystem.ts
â”‚
â”œâ”€â”€ application/                   # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ GameApplication.ts         # ä¸»åº”ç”¨æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ SceneManager.ts           # åœºæ™¯ç®¡ç†å™¨
â”‚   â”œâ”€â”€ InputManager.ts           # è¾“å…¥ç®¡ç†å™¨
â”‚   â”œâ”€â”€ AudioManager.ts           # éŸ³é¢‘ç®¡ç†å™¨
â”‚   â””â”€â”€ UIManager.ts              # UIç®¡ç†å™¨
â”‚
â”œâ”€â”€ presentation/                  # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ vue/                      # Vueç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/           # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/               # é¡µé¢è§†å›¾
â”‚   â”‚   â””â”€â”€ composables/         # ç»„åˆå¼å‡½æ•°
â”‚   â””â”€â”€ phaser/                   # Phaseråœºæ™¯
â”‚       â”œâ”€â”€ scenes/              # æ¸¸æˆåœºæ™¯
â”‚       â”œâ”€â”€ entities/            # æ¸¸æˆå®ä½“
â”‚       â””â”€â”€ ui/                  # æ¸¸æˆå†…UI
â”‚
â”œâ”€â”€ types/                        # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ character.ts
â”‚   â”œâ”€â”€ equipment.ts
â”‚   â”œâ”€â”€ combat.ts
â”‚   â””â”€â”€ common.ts
â”‚
â”œâ”€â”€ assets/                       # é™æ€èµ„æº
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ audio/
â”‚   â””â”€â”€ data/
â”‚
â””â”€â”€ utils/                        # å·¥å…·å‡½æ•°
    â”œâ”€â”€ math.ts
    â”œâ”€â”€ random.ts
    â””â”€â”€ helpers.ts
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯´æ˜

### 1. GameEngine (æ¸¸æˆå¼•æ“æ ¸å¿ƒ)
- ç»Ÿä¸€çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
- å„ç³»ç»Ÿçš„åè°ƒä¸­å¿ƒ
- å…¨å±€é”™è¯¯å¤„ç†

### 2. EventBus (äº‹ä»¶æ€»çº¿)
- ç±»å‹å®‰å…¨çš„äº‹ä»¶ç³»ç»Ÿ
- ç³»ç»Ÿé—´è§£è€¦é€šä¿¡
- æ”¯æŒåŒæ­¥/å¼‚æ­¥äº‹ä»¶

### 3. StateManager (çŠ¶æ€ç®¡ç†)
- ç»Ÿä¸€çš„åº”ç”¨çŠ¶æ€
- Vueå“åº”å¼é›†æˆ
- è‡ªåŠ¨æŒä¹…åŒ–

### 4. é¢†åŸŸé©±åŠ¨è®¾è®¡ (DDD)
- æŒ‰ä¸šåŠ¡é¢†åŸŸç»„ç»‡ä»£ç 
- é¢†åŸŸæ¨¡å‹å°è£…ä¸šåŠ¡é€»è¾‘
- æ¸…æ™°çš„ä¸šåŠ¡è¾¹ç•Œ

## ğŸš€ é‡æ„å®æ–½æ­¥éª¤

### é˜¶æ®µä¸€ï¼šæ ¸å¿ƒæ¡†æ¶æ­å»º (1-2å‘¨)

1. **åˆ›å»ºæ ¸å¿ƒå±‚**
   ```bash
   # åˆ›å»ºæ ¸å¿ƒç»„ä»¶
   mkdir -p src/core
   # å®ç° GameEngine, EventBus, Entity ç­‰
   ```

2. **é‡æ„çŠ¶æ€ç®¡ç†**
   ```bash
   # æ•´åˆç°æœ‰çš„å¤šä¸ªçŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
   mkdir -p src/infrastructure
   # åˆ›å»ºç»Ÿä¸€çš„ StateManager
   ```

3. **å»ºç«‹äº‹ä»¶ç³»ç»Ÿ**
   ```bash
   # æ›¿æ¢ç°æœ‰çš„ç›´æ¥è°ƒç”¨æ–¹å¼
   # ä½¿ç”¨äº‹ä»¶é©±åŠ¨çš„æ¶æ„
   ```

### é˜¶æ®µäºŒï¼šé¢†åŸŸå±‚é‡æ„ (2-3å‘¨)

1. **è§’è‰²é¢†åŸŸ**
   - æ•´åˆç°æœ‰çš„è§’è‰²ç³»ç»Ÿ
   - å®ç°è§’è‰²åˆ›å»ºã€å‡çº§ã€å±æ€§è®¡ç®—

2. **æˆ˜æ–—é¢†åŸŸ**
   - é‡æ„æˆ˜æ–—é€»è¾‘
   - å®ç°æŠ€èƒ½ç³»ç»Ÿ

3. **è£…å¤‡é¢†åŸŸ**
   - æ•´åˆè£…å¤‡å’Œé€šè´§ç³»ç»Ÿ
   - å®ç°åˆ¶ä½œç³»ç»Ÿ

### é˜¶æ®µä¸‰ï¼šåº”ç”¨å±‚å’Œè¡¨ç°å±‚ (2-3å‘¨)

1. **åº”ç”¨å±‚**
   - åˆ›å»ºç»Ÿä¸€çš„APIæ¥å£
   - å®ç°ä¸šåŠ¡æµç¨‹ç¼–æ’

2. **è¡¨ç°å±‚é‡æ„**
   - Vueç»„ä»¶ç°ä»£åŒ–
   - Phaseråœºæ™¯ä¼˜åŒ–

### é˜¶æ®µå››ï¼šä¼˜åŒ–å’Œæµ‹è¯• (1-2å‘¨)

1. **æ€§èƒ½ä¼˜åŒ–**
2. **å•å…ƒæµ‹è¯•**
3. **é›†æˆæµ‹è¯•**

## ğŸ’¡ å…³é”®è®¾è®¡åŸåˆ™

### 1. å•ä¸€èŒè´£åŸåˆ™
æ¯ä¸ªç±»å’Œæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªèŒè´£

### 2. ä¾èµ–å€’ç½®åŸåˆ™
é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–æŠ½è±¡

### 3. å¼€é—­åŸåˆ™
å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­

### 4. æ¥å£éš”ç¦»åŸåˆ™
å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£

## ğŸ® æ¸¸æˆç‰¹è‰²åŠŸèƒ½æ¶æ„

### 1. æŠ€èƒ½çš®è‚¤ç³»ç»Ÿ
```typescript
// æŠ€èƒ½å¤–è§‚ä¸é€»è¾‘åˆ†ç¦»
interface SkillSkin {
  id: string
  name: string
  effects: VisualEffect[]
  animations: Animation[]
  sounds: AudioClip[]
}

interface Skill {
  id: string
  logic: SkillLogic
  currentSkin: SkillSkin
  availableSkins: SkillSkin[]
}
```

### 2. å‡åä»»åŠ¡ç³»ç»Ÿ
```typescript
// ç±»ä¼¼é­”å…½è¨æ»¡å›¾è…¾ä»»åŠ¡çš„è®¾è®¡
interface AscendancyQuest {
  id: string
  type: 'trial' | 'challenge' | 'journey'
  difficulty: number
  requirements: QuestRequirement[]
  rewards: AscendancyReward[]
  narrative: QuestNarrative  // RPGä»£å…¥æ„Ÿ
}
```

### 3. è´§å¸åˆ¶ä½œç³»ç»Ÿ
```typescript
// åŸç‰ˆæµæ”¾ä¹‹è·¯çš„é€šè´§ç³»ç»Ÿ
interface CurrencySystem {
  currencies: Currency[]
  recipes: CraftingRecipe[]
  workbench: CraftingInterface
}
```

## ğŸ“Š æ¶æ„ä¼˜åŠ¿

### 1. å¯ç»´æŠ¤æ€§
- æ¸…æ™°çš„ä»£ç ç»„ç»‡
- æ¨¡å—åŒ–è®¾è®¡
- æ˜“äºç†è§£å’Œä¿®æ”¹

### 2. å¯æ‰©å±•æ€§
- æ–°åŠŸèƒ½æ˜“äºæ·»åŠ 
- ç³»ç»Ÿé—´ä½è€¦åˆ
- æ”¯æŒå¹¶è¡Œå¼€å‘

### 3. å¯æµ‹è¯•æ€§
- å•å…ƒæµ‹è¯•å‹å¥½
- ä¾èµ–æ³¨å…¥
- Mockå’ŒStubæ”¯æŒ

### 4. æ€§èƒ½
- äº‹ä»¶é©±åŠ¨é¿å…è½®è¯¢
- å»¶è¿ŸåŠ è½½
- èµ„æºç®¡ç†ä¼˜åŒ–

## ğŸ”„ æ¸è¿›å¼è¿ç§»ç­–ç•¥

### 1. ä¿æŒå‘åå…¼å®¹
åœ¨é‡æ„è¿‡ç¨‹ä¸­ï¼Œä¿æŒç°æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ

### 2. åˆ†æ¨¡å—è¿ç§»
æ¯æ¬¡é‡æ„ä¸€ä¸ªé¢†åŸŸï¼Œé€æ­¥æ›¿æ¢

### 3. åŒå†™ç­–ç•¥
æ–°æ—§ç³»ç»Ÿå¹¶å­˜ï¼Œé€æ­¥åˆ‡æ¢

### 4. å›æ»šæœºåˆ¶
æ¯ä¸ªé‡æ„æ­¥éª¤éƒ½æœ‰å›æ»šæ–¹æ¡ˆ

## ğŸ“ æ¥ä¸‹æ¥çš„å…·ä½“æ­¥éª¤

1. **ç«‹å³å¼€å§‹**: åˆ›å»ºæ ¸å¿ƒæ¡†æ¶
2. **ç¬¬ä¸€ä¼˜å…ˆçº§**: ç»Ÿä¸€çŠ¶æ€ç®¡ç†
3. **ç¬¬äºŒä¼˜å…ˆçº§**: é‡æ„è§’è‰²ç³»ç»Ÿ
4. **ç¬¬ä¸‰ä¼˜å…ˆçº§**: å®Œå–„æˆ˜æ–—ç³»ç»Ÿ
5. **ç¬¬å››ä¼˜å…ˆçº§**: ä¼˜åŒ–UIå’Œç”¨æˆ·ä½“éªŒ

 